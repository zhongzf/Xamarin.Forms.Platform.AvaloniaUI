<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>AvaloniaApplication.Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="styles.77ffc6e32d2c0b6dd06d.css">
    <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
</head>

<body>
    <a href="ngx-admin.html" class="btn btn-primary">ngx-admin</a>
    <a href="http://www.bing.com" class="btn btn-primary">Bing</a>
    <a onclick="button_click();" class="btn">test button</a>
    <a id="testbutton" class="btn btn-warning">test button</a>
    <a id="v8hanlder" class="btn btn-warning">v8hanlder</a>
    <a id="v8hanlder2" class="btn btn-warning">v8hanlder2</a>
    <div class="testdiv">
    </div>
    <div class="testdiv2">
    </div>
    <script>
        function button_click() {
            alert('test');
        }

        $(function () {
            $('#testbutton').on('click', function () {
                //alert('test2');
                $('.testdiv').html('test content - 3 - 中文');

                $.get('avalonia://demo', {
                    name: "John",
                    time: "2pm"
                }, function (data) {
                    $('.testdiv2').html(data);
                });

                testPost();
            });
        });

        $(function () {
            $('#v8hanlder').click(function () {
                avalonia.myFunction();
            });

            $('#v8hanlder2').click(function () {
                var result = avalonia.myFunction('test', 1, { name: 'john', age: 30 });
                $('.testdiv').html($('.testdiv').html() + result);
            });
        });

        function CreateXmlHttpRequest() {
            var xmlHttp = null;
            if (window.XMLHttpRequest) {
                // For Mozilla, Safari, ...
                xmlHttp = new XMLHttpRequest();
            } else if (window.ActiveXObject) {
                // For Internet Explorer
                xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
            }
            return xmlHttp;
        }

        function testPost() {
            var xmlHttp = CreateXmlHttpRequest();
            $('.testdiv2').html($('.testdiv2').html() + xmlHttp);

            var para = "id=testid&name=testname";
            xmlHttp.open("GET", "avalonia://demo", false);
            xmlHttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            xmlHttp.send(para);
            var result = xmlHttp.status;
            if (xmlHttp.readyState == 4) {
                if (result == 200) {
                    var response = xmlHttp.responseText;
                    $('.testdiv2').html($('.testdiv2').html() + response);
                }
            }
        }
    </script>
</body>

</html>